<div>
  <div [formGroup]="experienceFormGroup">
    <ng-container formArrayName="experience">
      <div
        *ngFor="
          let experienceForm of experienceFormArray.controls;
          let index = index
        "
      >
        <ng-container [formGroupName]="index">
          <pk-titlebar
            [title]="'Experience'"
            [index]="index"
            [isOpen]="experienceForm.get('isOpen')?.value"
            [actionButtons]="getExperienceActions(index)"
            (notifyToggle)="openCloseExp($event)"
            (notifyAction)="notifyAction($event)"
          ></pk-titlebar>

          <div class="grid" *ngIf="experienceForm.get('isOpen')?.value">
            <mat-form-field appearance="fill">
              <mat-label>Position</mat-label>
              <input matInput formControlName="position" />
              <mat-error></mat-error>
            </mat-form-field>

            <mat-form-field appearance="fill">
              <mat-label>Company Name</mat-label>
              <input matInput formControlName="companyName" />
              <mat-error></mat-error>
            </mat-form-field>

            <div class="grid grid-cols-2 gap-2">
              <mat-form-field appearance="fill">
                <mat-label>Start Date</mat-label>
                <input matInput formControlName="startDate" />
                <mat-error></mat-error>
              </mat-form-field>

              <mat-form-field appearance="fill">
                <mat-label>End Date</mat-label>
                <input matInput formControlName="endDate" />
                <mat-error></mat-error>
              </mat-form-field>
            </div>
            <div class="grid grid-cols-4 gap-2">
              <mat-form-field appearance="fill">
                <mat-label>Duration(Year)</mat-label>
                <input matInput formControlName="durationYear" />
                <mat-error></mat-error>
              </mat-form-field>

              <mat-form-field appearance="fill">
                <mat-label>Duration(Month)</mat-label>
                <input matInput formControlName="durationMonth" />
                <mat-error></mat-error>
              </mat-form-field>

              <mat-form-field appearance="fill">
                <mat-label>Country</mat-label>
                <input matInput formControlName="country" />
                <mat-error></mat-error>
              </mat-form-field>

              <mat-form-field appearance="fill">
                <mat-label>Order</mat-label>
                <input number matInput formControlName="order" />
                <mat-error></mat-error>
              </mat-form-field>
            </div>
          </div>
        </ng-container>
      </div>
      <button
        class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded"
        (click)="saveExperience()"
      >
        Save
      </button>
    </ng-container>
  </div>
</div>
